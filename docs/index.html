<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Markov Random Field Models for Image Analysis • mrf2d</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Markov Random Field Models for Image Analysis">
<meta property="og:description" content="Model fitting, sampling and visualization
    for the (Hidden) Markov Random Field model with pairwise interactions and 
    general interaction structure from 
    Freguglia, Garcia &amp; Bicas (2020) &lt;doi:10.1002/env.2613&gt;,
    which has many popular models used in 2-dimensional lattices
    as particular cases, like the Ising Model and Potts Model.">
<meta property="og:image" content="https://freguglia.github.io/mrf2d/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">mrf2d</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/mrf2d-family.html">Parameter restriction families in mrf2d</a>
    </li>
    <li>
      <a href="articles/three-dimensions-on-mrf2d.html">Working with 3d lattices in mrf2d</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Freguglia/mrf2d/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="mrf2d-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mrf2d-" class="anchor"></a>mrf2d <a href="https://github.com/Freguglia/mrf2d"><img src="reference/figures/logo.png" align="right" height="200"></a>
</h1></div>
<!-- badges: start -->

<p>Markov Random Fields are probabilistic models capable of describing sets of random variables with a local dependence property (the Markov property) defined on a neighborhood system. Particularly on the context of image processing, pixels can be seen as vertices of a graph defined on a finite 2-dimensional lattice, and a neighborhood system can be defined based on their relative positions to construct a MRF.</p>
<p><img src="reference/figures/animation_ising.gif" alt="drawing" width="300" align="left"></p>
<p>The goal of <code>mrf2d</code> is to provide a framework for the analysis of Markov Random Fields with pairwise interactions on 2-dimensional lattices, including Hidden Markov Random Fields. It introduces the S4 class <code>mrfi</code> to describe interaction structures in a very general way, being able to adapt from very simple cases like the Ising Model to complex anisotropic models with different types of interaction.</p>
<p><img src="reference/figures/README-example_interacions-1.png"><img src="reference/figures/README-example_interacions-2.png"><img src="reference/figures/README-example_interacions-3.png"></p>
<p>A complete paper describing the details of the package and examples can be found at <a href="https://arxiv.org/abs/2006.00383" class="uri">https://arxiv.org/abs/2006.00383</a>.</p>
<hr>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the stable version of <code>mrf2d</code> from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"mrf2d"</span><span class="op">)</span></pre></div>
<p>The development version is available on the package’s <a href="https://github.com/Freguglia/mrf2d">Github page</a>. It can be installed with the <code>devtools</code> package by using</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"Freguglia/mrf2d"</span><span class="op">)</span></pre></div>
<hr>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p><code>mrf2d</code> introduces a programming interface for the general Markov Random Field model in <em>Freguglia, Victor, Nancy L. Garcia, and Juliano L. Bicas. “Hidden Markov random field models applied to color homogeneity evaluation in dyed textile images.” Environmetrics (2019): e2613.</em> Using specific interaction structures and parameter restrictions can lead to important models as particular cases, such as the Potts model.</p>
<p>It introduces the S4 class <code>mrfi</code> to represent interaction structures. The <code><a href="reference/mrfi-class.html">mrfi()</a></code> function can be used to create these objects representing interaction structures with relative positions included based on the norm of the relative position (distance) or explicitly specified</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">interact</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mrfi-class.html">mrfi</a></span><span class="op">(</span>max_norm <span class="op">=</span> <span class="fl">1</span>, positions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">interact</span>
<span class="co">#&gt; 3 interacting positions.</span>
<span class="co">#&gt;   rx     ry</span>
<span class="co">#&gt;    1      0</span>
<span class="co">#&gt;    0      1</span>
<span class="co">#&gt;    4      2</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">interact</span><span class="op">)</span></pre></div>
<p><img src="reference/figures/README-plot_interaction-1.png"><!-- --></p>
<p>Potentials (parameters) are represented by three-dimensional arrays, where rows and columns represent pixel label values and slices represent interacting positions.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">potentials</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/smr_array.html">expand_array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.9</span>, <span class="op">-</span><span class="fl">0.9</span>, <span class="fl">0.2</span><span class="op">)</span>, family <span class="op">=</span> <span class="st">"oneeach"</span>, C <span class="op">=</span> <span class="fl">1</span>, mrfi <span class="op">=</span> <span class="va">interact</span><span class="op">)</span>
<span class="va">potentials</span>
<span class="co">#&gt; , , (1,0)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      0    1</span>
<span class="co">#&gt; 0  0.0 -0.9</span>
<span class="co">#&gt; 1 -0.9  0.0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , (0,1)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      0    1</span>
<span class="co">#&gt; 0  0.0 -0.9</span>
<span class="co">#&gt; 1 -0.9  0.0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , (4,2)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     0   1</span>
<span class="co">#&gt; 0 0.0 0.2</span>
<span class="co">#&gt; 1 0.2 0.0</span></pre></div>
<p>The negative values out of diagonal means different “colors” are less likely in that relative position.</p>
<p>The package has many built-in functions for sampling, potentials estimation and hidden MRF model fitting (used for image segmentation), but it also provides all the basic stack of computations used to implement algorithms for MRF models, making it suitable for development of research in Markov Random Field models.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">img_dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">200</span>,<span class="fl">200</span><span class="op">)</span>
<span class="va">Z</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rmrf2d.html">rmrf2d</a></span><span class="op">(</span><span class="va">img_dim</span>, mrfi <span class="op">=</span> <span class="va">interact</span>, theta <span class="op">=</span> <span class="va">potentials</span>, cycles <span class="op">=</span> <span class="fl">60</span><span class="op">)</span>
<span class="fu"><a href="reference/dplot.html">dplot</a></span><span class="op">(</span><span class="va">Z</span>, legend <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></pre></div>
<p><img src="reference/figures/README-Z_example_plot-1.png" style="display: block; margin: auto;"></p>
<hr>
</div>
<div id="contributing-and-bug-reports" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing-and-bug-reports" class="anchor"></a>Contributing and Bug Reports</h2>
<p>If you’re interested in contributing or found a bug or error, please file an <a href="https://github.com/Freguglia/mrf2d/issues">issue</a>. Contributions can be done in form of code optimization, new ideas, discussing new structures, etc.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=mrf2d">https://​cloud.r-project.org/​package=mrf2d</a>
</li>
<li>Browse source code at <br><a href="https://github.com/Freguglia/mrf2d/">https://​github.com/​Freguglia/​mrf2d/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/Freguglia/mrf2d/issues">https://​github.com/​Freguglia/​mrf2d/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing mrf2d</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Victor Freguglia <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6189-4453" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/Freguglia/mrf2d"><img src="https://travis-ci.org/Freguglia/mrf2d.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/gh/Freguglia/mrf2d?branch=master"><img src="https://codecov.io/gh/Freguglia/mrf2d/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://cran.r-project.org/package=mrf2d"><img src="https://www.r-pkg.org/badges/version/mrf2d" alt="CRAN status"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#stable"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Victor Freguglia.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
